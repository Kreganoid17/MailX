@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@

@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor

@model IEnumerable<Mail_X.Models.HomePage>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/Theme.css">

<div>

    @Html.Partial("_NavBar")

</div>


<body>

    <div class = "float-start">

        <button class="btn btn-primary my-3" style = "background-color: #73a9ff; border-color:#73a9ff;" onclick= "location.href='@Url.Action("ShowForm", "Form")'">Create Form</button>

    </div>

    

    <div class = "mt-4" >

        <table class="text-center w-100">

            <thead class="thead-dark">
                <tr>
                    <th scope="col">Form ID</th>
                    <th scope="col">Form Name</th>
                    <th scope="col">Date Created</th>
                    <th scope="col">Status</th>
                    <th scope="col">Properties</th>
               </tr>
           </thead>

        </table>

        <table class="text-center w-100" id = "myTable" >
            
            <tbody>
               
                @foreach (var item in Model)
                {
                    
                    <tr>
                        <td>@item.FormID</td>
                        <td>@item.FormName</td>
                        <td>@item.FDate</td>
                        <td>@item.Status</td>
                        <td>

                            <div style = "display:flex;">

                            <div style = "flex:1;">

                                @using (@Html.BeginForm("ViewDoc","HomePage", new {id = @item.FormID}))
                                {
                                    
                                    <button type = "submit" class = "fa fa-eye" style = "border:0; background-color:#ffffff; color:#0D6EFD;"></button>

                                }

                            </div>

                            <div style = "flex:1;">

                                @using (@Html.BeginForm("UpdateDoc","HomePage", new { id = @item.FormID}))
                                {
                                    
                                    <button type = "submit" class = "fa fa-edit" style = "border:0; background-color:#ffffff;"></button>

                                }

                            </div>

                            <div style = "flex:1;">

                                    <button type = "submit" class = "fa fa-trash" style = "border:0; background-color:#ffffff; color:#EF5A5A;" data-bs-toggle = "modal" data-bs-target="#confirmModal" onclick = "ShowModal(@item.FormID)"></button>

                            </div>

                           

                            <div style = "flex:1;">

                                @using (@Html.BeginForm("Send","HomePage", new { ID= @item.FormID, FormName = @item.FormName}))
                                {
                                    
                                    <button type = "submit" class = "fa fa-paper-plane" style = "border:0; background-color:#ffffff; color:#82954B;"></button>

                                }

                            </div>

                            </div>
                                
                            
                        </td>
                    </tr>

                }

            </tbody>
</table>

    </div>

    




</body>


<div class = "modal fade" id="confirmModal" tabindex="-1" aria-labelledby="confirmModalLabel" aria-hidden="true">
            <div class = "modal-dialog">
                <div class = "modal-content">
                    <div class = "modal-header">
                        <h5 class = "modal-title" id = "confirmModalLabel">Confirm</h5>
                        <button type = "button" class = "btn-close" data-bs-dismiss = "modal" aria-label = "Close"></button>
                    </div>
                    <div class = "modal-body" id = "modal_body">
                        
                    </div>
                    <div class = "modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss = "modal">No</button>
                        <button type="button" class="btn btn-primary"   data-bs-dismiss = "modal" onclick = "DeleteForm()">Yes</button>
                    </div>
                </div>
            </div>
       </div>





    <script type = "text/javascript">
    
        var DeleteID;

        function ShowModal(ID){
        
            document.getElementById("modal_body").innerHTML = "are you sure you want to delete record with from ID: " + ID;

            DeleteID = ID;

            $("#confirmModal").modal();

        
        }

        function DeleteForm(){
        
            window.location.href = '@Url.Action("DeleteForm", "HomePage")?ID=' + DeleteID;
        
        }
    
    </script>

@if(TempData["Message"] != null){
                
                <script>

                    alert("@TempData["Message"]");

                </script>

            } 
